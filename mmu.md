MMU，全称是 **Memory Management Unit（内存管理单元）**，是**CPU 中一个专门负责“地址转换”的硬件模块**。

---

## 🧠 MMU 的作用

MMU 负责将程序运行时使用的 **虚拟地址（Virtual Address）** 转换为实际的 **物理地址（Physical Address）**，这是实现**虚拟内存**的关键机制。

---

## ✅ MMU 主要功能包括：

| 功能         | 说明                             |
| ---------- | ------------------------------ |
| **地址转换**   | 把虚拟地址 → 物理地址（根据页表）             |
| **内存保护**   | 每个进程只能访问自己的内存，访问非法页时触发异常       |
| **权限控制**   | 可设置页面只读/可执行/用户态等权限             |
| **缺页处理**   | 发现页面不在内存时，触发“缺页异常”由操作系统处理      |
| **TLB 管理** | MMU 内部或旁边有一个 TLB，用于缓存页表映射，加速访问 |

---

## 🧱 MMU 在地址转换中的位置

```text
        CPU (执行指令，发出虚拟地址)
                         ↓
        ┌───────────────────────────┐
        │         MMU（地址转换）    │
        └───────────────────────────┘
                         ↓
                 物理内存访问
```

---

## 🧩 举个例子：

程序访问虚拟地址 `0x12345678`，但这不等于内存中就有第 `0x12345678` 个字节。

MMU 做的事是：

1. 取出虚拟地址的页号
2. 查页表，发现该页应该映射到物理内存地址 `0x89ABC000`
3. 拼接偏移，转换成 `0x89ABC678`，去访问物理内存

程序对这一切**毫不知情**。这正是虚拟内存的魔力。

---

## 💡 没有 MMU 会怎样？

* 程序只能直接操作物理地址
* 无法实现多进程隔离、内存保护、虚拟内存、权限控制等
* 嵌入式系统中，为节省成本，有时确实**没有 MMU**

---

## 🧠 小结：

> **MMU 就是地址转换专家**，负责将虚拟地址转换为物理地址，同时提供内存保护、访问权限控制和缺页检测，是现代多任务操作系统的核心硬件支持。

---