DNS（Domain Name System）域名解析的流程是将\*\*人类可读的域名（如 `www.example.com`）转换为IP地址（如 `93.184.216.34`）\*\*的过程。这个过程通常分为以下几个步骤：

---

## **一、DNS解析的完整流程（以递归解析为例）**

假设我们访问 `www.example.com`：

### 1. **浏览器缓存**

* 浏览器首先检查自己是否缓存了 `www.example.com` 的 IP 地址（比如最近刚访问过）。
* 若命中，直接返回。

### 2. **操作系统缓存（本地DNS缓存）**

* 浏览器未命中后，会通过系统调用询问操作系统的 DNS 缓存。
* 若系统缓存中命中，返回 IP 地址。

### 3. **本地 hosts 文件**

* 如果系统缓存未命中，操作系统会检查 `/etc/hosts` 文件（Windows 是 `C:\Windows\System32\drivers\etc\hosts`）中是否有对应记录。

### 4. **DNS 服务器（递归查询）**

如果以上都没有命中，操作系统会向 **本地配置的 DNS 服务器** 发起查询（一般是运营商或路由器指定的）。

然后由该 DNS 服务器进行递归查询：

---

### **递归查询过程：**

#### a. **根域名服务器（Root Server）**

* 本地DNS服务器首先请求 **根DNS服务器**（共13个集群，全球分布）。
* 它不会直接告诉你 IP，但会告诉你：`.com` 顶级域的 DNS 服务器地址。

#### b. **顶级域名服务器（TLD Server）**

* 然后本地DNS服务器向 `.com` 顶级DNS服务器发送请求。
* `.com` DNS服务器返回负责 `example.com` 的 **权威DNS服务器** 的地址。

#### c. **权威DNS服务器（Authoritative DNS Server）**

* 最后，请求发送到 `example.com` 的权威DNS服务器。
* 这个服务器返回 `www.example.com` 对应的 IP 地址。

---

### 5. **本地DNS服务器将结果返回给操作系统**

* 本地DNS服务器将最终结果（IP 地址）返回给客户端系统，并进行缓存。

### 6. **操作系统返回给浏览器**

* 操作系统将 IP 地址返回给浏览器，浏览器就可以发起 HTTP/HTTPS 请求了。

---

## **流程图简化版：**

```
浏览器 → 系统缓存 → hosts文件 → 本地DNS → 根DNS → 顶级DNS → 权威DNS → 返回IP
```

---

## **总结**

DNS域名解析的关键点：

* 涉及缓存：浏览器缓存、系统缓存、本地DNS缓存。
* 涉及多个DNS服务器：根DNS、TLD DNS、权威DNS。
* 有两种查询模式：

  * **递归查询**（本地DNS帮你查到底）— 常见。
  * **迭代查询**（客户端自己查）— 不常用，效率低。
