## 📌 为什么索引能加快检索速度？

### ✅ 核心原因：**减少查找数据的数量**

没有索引时，数据库只能 **全表扫描** —— 一条一条地去找你要的数据。

有了索引后，就像字典的“目录”，可以 **快速定位到数据的位置**，极大降低需要扫描的数据量。

---

## 📚 底层的数据结构是什么？

### 1. **B+ 树（最常用）**

大多数数据库（如 MySQL 的 InnoDB）用的是 **B+ 树索引**：

* **有序**：索引是按照字段排序组织的
* **多叉平衡树**：相比二叉树，B+树的**分支更多**，层数更少
* **叶子节点存储了数据的真实位置（或主键值）**

优点：

* 范围查询特别高效
* 支持快速定位（比如用二分方式找）

例子：
如果你要查 `age = 25`，可以像在字典中找“25”那一页，**几次磁盘访问就定位到行**，而不是一行一行比对。

---

### 2. **哈希索引（Hash Index）**

适合精确匹配的查询，如 `WHERE id = 123`

特点：

* 查找速度是 O(1)
* 不支持范围查询

但是：

* **不支持范围查找和排序**
* 少用于主流数据库的主索引（MySQL 的 InnoDB 不支持 Hash 主索引）

---

### 3. **位图索引（Bitmap Index）**

适用于低基数（如性别、是否已婚等）：

* 每个可能值都用一组位表示（比如 0 或 1）
* 扫描时可以通过位操作快速定位数据

---

## 🔍 举例说明

假设你有一个表：

| id | name  | age |
| -- | ----- | --- |
| 1  | Tom   | 24  |
| 2  | Alice | 25  |
| 3  | Bob   | 25  |
| 4  | Lucy  | 26  |
| …  | …     | …   |

你执行：

```sql
SELECT * FROM users WHERE age = 25;
```

### 没有索引：

数据库只能从第一行开始 **一行一行地比对 age 字段**，时间复杂度 O(n)

### 有 B+ 树索引：

数据库直接查到 25 在 B+ 树中的位置，**立刻跳转**到匹配行，时间复杂度 O(log n)

---

## 🧠 小结

| 问题   | 有索引                | 没索引      |
| ---- | ------------------ | -------- |
| 查找速度 | 快（O(log n) 或 O(1)） | 慢（O(n)）  |
| 数据结构 | B+ 树、哈希表、位图等       | 无结构，全表扫描 |
| 范围查询 | B+ 树支持             | 慢        |
| 精确查找 | 哈希/B+树支持           | 慢        |
