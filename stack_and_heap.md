## ✅ 总览：堆 vs 栈

| 特性   | 栈（Stack）        | 堆（Heap）                                         |
| ---- | --------------- | ----------------------------------------------- |
| 管理方式 | 编译器自动分配、释放      | 程序员手动分配、手动或自动释放（如 `new/delete` 或 `malloc/free`） |
| 速度   | 快（系统底层用寄存器维护指针） | 慢（需要复杂的内存管理机制）                                  |
| 空间大小 | 较小，操作系统有严格限制    | 较大，但受限于系统可用内存                                   |
| 生命周期 | 随函数调用自动创建和释放    | 手动控制，直到显式释放或程序结束                                |
| 典型用途 | 函数调用、局部变量、返回地址等 | 动态内存分配（如创建数组、对象等）                               |
| 分配方式 | 连续内存，先进后出（LIFO） | 零散内存，可能产生碎片                                     |

---

## 🧠 1. 栈（Stack）

### 📌 特点：

* 系统自动管理；
* 内存连续，操作快；
* 存储**函数调用信息**、**局部变量**、**返回地址**等；
* 超出作用域会自动释放。

### ✳ 举例（C++ 或 C）：

```cpp
void func() {
    int a = 10;  // a 在栈中分配
} // 这里 a 自动释放
```

---

## 🧠 2. 堆（Heap）

### 📌 特点：

* 程序员显式申请与释放；
* 内存可能不连续；
* **动态分配内存**时使用；
* 容易产生内存泄漏或碎片（尤其在 C/C++ 中）。

### ✳ 举例（C++）：

```cpp
int* p = new int(5); // 堆上分配一个 int
delete p;            // 手动释放
```
---

## ⚠️ 常见问题

### Q1: 为什么栈比堆快？

* 栈使用寄存器维护栈顶指针，只需加减即可移动；
* 堆需要维护复杂的空闲表/链表结构，分配和回收都更慢。

### Q2: 栈溢出（Stack Overflow）和堆溢出（Heap Overflow）分别是什么意思？

* **栈溢出**：递归太深、局部数组太大，导致超出栈空间；
* **堆溢出**：动态申请太多内存，导致系统无法满足请求。

---
