`const char* ptr = "abcde";`

#### 1. `"abcde"` 存储在哪？

在Linux下，**字符串字面量常量** 通常被存储在 **只读数据段（.rodata）** 中。

#### 2. `ptr` 指向哪里？

* `ptr` 是一个指针变量，存储在栈上（stack）。
* 它的值是 `"abcde"` 的首地址，而 `"abcde"` 的内容存在 **只读数据段**（.rodata）。

#### 3. Linux进程内存分布（从高地址到低地址）如下：

```
高地址
+-----------------+
| 命令行参数/环境变量 |
+-----------------+
| 栈 Stack         |
+-----------------+
| 空洞（未映射）   |
+-----------------+
| 堆 Heap          |
+-----------------+
| BSS段（未初始化全局变量）|
+-----------------+
| 数据段（已初始化全局变量）|
+-----------------+
| 只读数据段（.rodata）     ← "abcde" 存在这里
+-----------------+
| 代码段（Text）    |
+-----------------+
低地址
```

| 项目     | 示例                  | 存储段              | 是否可写       | 生命周期  |
| ------ | ------------------- | ---------------- | ---------- | ----- |
| 静态局部变量 | `static int a = 5;` | `.data` / `.bss` | ✅          | 程序全局  |
| 静态全局变量 | `static int b;`     | `.bss`           | ✅          | 程序全局  |
| 字符串字面量 | `"abcde"`           | `.rodata`        | ❌          | 程序全局  |
| 函数定义   | `void foo() {}`     | `.text`          | ❌（只读 + 执行） | 程序全局  |
| 栈变量    | `int x = 0;`（局部变量）  | 栈区               | ✅          | 随函数调用 |
| 动态分配   | `new`, `malloc`     | 堆区               | ✅          | 手动管理  |

---

## ✅ 多线程共享的段（线程间可访问的共享内存）

在 Linux 进程中，**所有线程属于同一个进程**，因此它们共享进程的绝大部分内存空间：

| 段名                       | 是否线程共享        | 说明                                    |
| ------------------------ | ------------- | ------------------------------------- |
| `.text`（代码段）             | ✅ 共享          | 所有线程执行相同代码，存储函数体机器码，通常是只读的。           |
| `.data`（已初始化的全局/静态变量）    | ✅ 共享          | 多个线程访问同一个全局变量会竞争资源，需加锁。               |
| `.bss`（未初始化的全局/静态变量）     | ✅ 共享          | 与 `.data` 类似，只是初始值为 0。                |
| `.rodata`（只读数据段）         | ✅ 共享          | 通常为字符串字面量、`const` 全局变量等，线程只能读，不能写。    |
| Heap（堆）                  | ✅ 共享          | 所有线程可以使用 `malloc/new` 分配堆内存，也需注意并发访问。 |
| Memory-mapped 文件映射（mmap） | ✅ 共享（如果是共享映射） | 多线程常用于共享内存文件的并发访问。                    |

---

## ❌ 多线程**不共享**的段（线程私有）

| 区域                        | 是否共享                | 说明                                   |
| ------------------------- | ------------------- | ------------------------------------ |
| Stack（栈）                  | ❌ 不共享，每个线程有自己的栈     | 栈上存放局部变量、返回地址等。栈之间互不影响。              |
| Thread-local storage（TLS） | ❌ 不共享，每个线程独有的线程局部变量 | 用 `__thread` 或 `thread_local` 定义的变量。 |

---