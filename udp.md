`UDP`是一个面向无连接的传输层协议。

### 1. 结构

`UDP`的头部由`源端口，目标端口 ，长度（头部+数据），校验和（检验数据包是否完整）`组成，每部分是2字节，共8字节。

`UDP`是以报文为单位向多个主机广播数据的。

`UDP`不会建立连接，不会重传，也不保证数据是否到达，不保证数据顺序。

### 2. 应用

在追求实时性的场景下`UDP`更加好用，例如语音通话，视频会议，在线游戏，这些应用都可以允许丢包，但对最新状态的实时性要求更高，而`UDP`的无连接和轻量的特点就能满足。还有一个应用场景是`DNS`查询，它也不需要像`TCP`中连接的管理，`UDP`更加简单快速，它可以广播给多个域名服务器，即使丢了一个发送给域名服务器的包也不影响其他服务器，甚至即使全部失败也可以重新递归查询。

### 3. UDP模拟TCP

要模拟TCP首先就是要补充报文头部，加入`seq, ack, Flags, rwnd`。

TCP三次握手和四次挥手的状态机。

可靠传输：通过未收到`ACK`报文段的超时重传。

顺序控制：收到乱序报文段后缓存，等待前面的报文段到达再拼接。

流量控制：通过 `swnd`滑动窗口发送数据，接收方的`rwnd`来限制发送速率。
