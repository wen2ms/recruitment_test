HTTP/2 是 **超文本传输协议第二版**，是 HTTP/1.1 的升级版本，由 [IETF 在 2015 年标准化](https://datatracker.ietf.org/doc/html/rfc7540)，主要目标是**提升网页加载速度和效率**。

---

## 🔍 一句话总结：

> **HTTP/2 通过多路复用、二进制格式、头部压缩等机制，大幅提高了网页加载效率。**

---

## ✅ HTTP/2 相比 HTTP/1.1 的核心改进

| 特性                    | HTTP/1.1      | HTTP/2 改进点                |
| --------------------- | ------------- | ------------------------- |
| ⏱️ 多路复用               | 每个请求一个连接（容易堵） | **一个连接上并发多个请求**（解决“队头阻塞”） |
| 🧱 协议格式               | 文本（不便解析）      | **二进制帧**（更高效）             |
| 🧠 头部压缩               | 每次都发送完整头部（冗余） | **HPACK 压缩算法**            |
| 📦 服务器推送（Server Push） | 不支持           | 支持（可提前推送资源）               |
| 🔁 请求顺序控制             | 请求阻塞容易造成延迟    | 支持优先级与依赖（可更灵活调度）          |

---

## 🔧 举个例子：网页加载

一个网页要加载多个资源（HTML、CSS、JS、图片）：

* **HTTP/1.1**：浏览器会开多个 TCP 连接（一般最多 6 个）并发加载资源，连接多，延迟高。
* **HTTP/2**：只需要 **一个连接**，通过 **帧的形式并发加载所有资源**，资源调度更快、更稳。

---

## 🛠️ 工作机制概览（简化）

1. 所有数据通过一个 TCP 连接发送。
2. 连接中拆分为多个“流”（每个请求对应一个流）。
3. 每个流的数据以“帧”的形式交错发送。
4. 接收方重新组合帧还原请求和响应。

---

## 🔐 HTTP/2 和 HTTPS

* 实际部署中，**主流浏览器只支持加密的 HTTP/2（即 HTTPS + HTTP/2）**。
* 所以你几乎只会看到 `https://` 网站使用 HTTP/2。

---

## 🚀 效果

* 页面加载速度明显提升
* 减少了延迟
* 减少了服务端资源消耗

---

## 📘 总结

| 问题             | 回答                             |
| -------------- | ------------------------------ |
| HTTP/2 是什么？    | HTTP 的第二代协议，优化性能，提升网页加载效率      |
| 与 HTTP/1.1 区别？ | 多路复用、头部压缩、二进制格式、服务器推送          |
| 使用前提？          | 一般需部署 HTTPS，服务端和浏览器都要支持 HTTP/2 |

---


HTTP/2 **彻底改变了请求和响应的传输格式** —— 它**不再使用传统的请求行 + 请求头 + 空行 + 请求体的文本结构**，而是：

> 用 **二进制帧（binary frames）** 来组织和传输数据。

---

## 🧱 HTTP/1.1 vs HTTP/2 请求格式对比

| 特性      | HTTP/1.1 格式                | HTTP/2 格式                           |
| ------- | -------------------------- | ----------------------------------- |
| 结构      | 请求行 + 请求头 + 空行 + 请求体（纯文本）  | **多个二进制帧**（headers、data、settings 等） |
| 请求行     | `GET /index.html HTTP/1.1` | 无传统“请求行”，改为头部字段 `:method`、`:path`   |
| 请求头     | 一堆 `Key: Value` 的文本形式      | 用 **Headers 帧** 携带，**HPACK压缩**      |
| 请求体（可选） | 单独一段数据                     | 用 **Data 帧** 携带                     |
| 分隔方式    | 通过换行符分隔（`\r\n\r\n`）        | 无换行符，靠二进制帧结构解析                      |

---

## 🔍 HTTP/2 的请求结构（简化版）

以一个 POST 请求为例：

```
客户端发送：
 1. SETTINGS 帧：初始化连接参数
 2. HEADERS 帧：包含伪首部字段（:method, :path 等）和普通头部字段
 3. DATA 帧（可选）：包含请求体内容
```

### HEADERS 帧中常见伪首部字段：

| 字段           | 说明                |
| ------------ | ----------------- |
| `:method`    | 请求方法（如 GET、POST）  |
| `:scheme`    | 协议（http 或 https）  |
| `:authority` | 主机名（Host）         |
| `:path`      | 路径（如 /index.html） |

---

## 🎯 举个例子：GET 请求（HTTP/2 内部格式）

客户端发送的帧：

1. `HEADERS` 帧：

   * `:method: GET`
   * `:scheme: https`
   * `:authority: www.example.com`
   * `:path: /index.html`
   * `user-agent: curl/7.88.1`
   * `accept: */*`

> 没有传统的请求行，也没有空行。

---

## ✅ 总结

| 问题                                   | 回答                                      |
| ------------------------------------ | --------------------------------------- |
| HTTP/2 还有“请求行 + 请求头 + 空行 + 请求体”的格式吗？ | ❌ 没有，HTTP/2 使用二进制帧来传输请求和响应              |
| 请求是怎么表示的？                            | 请求方法、路径等通过伪首部字段（如 `:method`, `:path`）传输 |
| 如何分割头部和数据？                           | 用不同的帧（HEADERS 帧 和 DATA 帧）区分，不靠换行符或空行    |
